"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[49498],{14496:(e,t,n)=>{n.d(t,{b:()=>_});var a=n(74848),r=n(16522),s=n(94236),o=n(21373),i=n(5524),l=n(73077),c=n(38621),u=n(51120),d=n(42455),h=n(69599),m=n(95869),p=n(77430),g=n(78223);function f(e){let t,n,s,o=(0,r.c)(12),{topLevelAgents:l,customAgents:c,selectedAgent:u,onSelectAgent:d}=e;return o[0]!==d||o[1]!==u||o[2]!==l?(t=l.length>0&&(0,a.jsxs)(i.l.Group,{selectionVariant:"single",children:[(0,a.jsx)(i.l.GroupHeading,{children:"Agents"}),l.map(e=>{let t=(0,g.sS)(e.slug),n=u?.typeName==="topLevel"&&u.topLevelAgentId===e.id,r=!u?.typeName&&t,s=n||r;return(0,a.jsxs)(i.l.Item,{disabled:!1,selected:s,onSelect:()=>d(s?{}:{typeName:"topLevel",topLevelAgentId:e.id}),children:[(0,a.jsx)(i.l.LeadingVisual,{children:(0,a.jsx)(p.r,{src:e.avatar_url||"",size:16,square:!0})}),e.display_name]},e.id)})]}),o[0]=d,o[1]=u,o[2]=l,o[3]=t):t=o[3],o[4]!==c||o[5]!==d||o[6]!==u||o[7]!==l.length?(n=c.length>0&&(0,a.jsxs)(a.Fragment,{children:[l.length>0&&(0,a.jsx)(i.l.Divider,{}),(0,a.jsxs)(i.l.Group,{selectionVariant:"single",children:[(0,a.jsx)(i.l.GroupHeading,{children:"Custom agents"}),c.map(e=>{let t=!!e.config_error&&e.config_error.length>0,n=u.subAgentSlug===e.name;return(0,a.jsx)(i.l.Item,{disabled:t,inactiveText:t?e.config_error:void 0,selected:n,onSelect:()=>d(n?{}:{typeName:"customSubAgent",subAgentSlug:e.name}),children:e.display_name||e.name},e.name)})]})]}),o[4]=c,o[5]=d,o[6]=u,o[7]=l.length,o[8]=n):n=o[8],o[9]!==t||o[10]!==n?(s=(0,a.jsxs)(a.Fragment,{children:[t,n]}),o[9]=t,o[10]=n,o[11]=s):s=o[11],s}try{f.displayName||(f.displayName="AgentListItems")}catch{}var v=n(82156),y=n(63422),S=n(34164),b=n(96540);function _(e){let t,n,l,_,C,x,w,N,I,R,T,j,k,O=(0,r.c)(50),{repo:L,branch:P,selectedAgent:B,onSelectAgent:$,iconOnly:G,disabled:F,buttonProps:D}=e,M=void 0===G||G,W=void 0!==F&&F;O[0]!==L?(t={repo:L},O[0]=L,O[1]=t):t=O[1];let{data:q,isLoading:z}=function(e){let t,n,a=(0,r.c)(4),{repo:s}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,h.G7)("agent_session_retry_fetch_capi_on_401"),a[0]=t):t=a[0];let o=t;return a[1]!==s.nameOnly||a[2]!==s.owner?(n={queryKey:["custom-agents",s.owner,s.nameOnly],queryFn:async()=>{try{let e=await (0,u.I)({path:`/agents/swe/custom-agents/${s.owner}/${s.nameOnly}`,retryOn401:o});if(404===e.status)return[];return(await e.json()).agents}catch{return[]}}},a[1]=s.nameOnly,a[2]=s.owner,a[3]=n):n=a[3],(0,d.b)(n)}(t);O[2]!==q?(n=void 0===q?[]:q,O[2]=q,O[3]=n):n=O[3];let U=n,{data:V,isLoading:H}=(0,m.n)(L.nameWithOwner);O[4]!==V?(l=void 0===V?[]:V,O[4]=V,O[5]=l):l=O[5];let K=l,Q=L.isEmpty||!P||z||H;O[6]!==U||O[7]!==K?(_=[...K,...U],O[6]=U,O[7]=K,O[8]=_):_=O[8];let J=_;O[9]!==J||O[10]!==Q||O[11]!==$||O[12]!==B?(x=()=>{Q||0===J.length||!B?.typeName||("topLevel"===B.typeName?J.some(e=>"id"in e&&e.id===B.topLevelAgentId):J.some(e=>"name"in e&&e.name===B.subAgentSlug))||$({})},C=[Q,J,B,$],O[9]=J,O[10]=Q,O[11]=$,O[12]=B,O[13]=C,O[14]=x):(C=O[13],x=O[14]),(0,b.useEffect)(x,C);let Y=E,X=Y(B)?"Copilot":B,Z="string"==typeof X?"Copilot"===X?"topLevel":"customSubAgent":X.typeName;if(O[15]!==Z||O[16]!==J||O[17]!==P||O[18]!==D||O[19]!==W||O[20]!==X||O[21]!==M||O[22]!==Q||O[23]!==L||O[24]!==B){let e,t,n,r,i,l,u=J.find(e=>"string"==typeof X?e.display_name===X:"topLevel"===Z?"id"in e&&e.id===X.topLevelAgentId:"customSubAgent"===Z?"name"in e&&e.name===X.subAgentSlug:void 0);e:{if("string"==typeof X){e=X;break e}if(!u){e=void 0;break e}e=u.display_name||("name"in u?u.name:void 0)}let d=e;if(O[29]!==P||O[30]!==L.nameOnly||O[31]!==L.owner){let e=new URLSearchParams({filename:".github/agents/my-agent.agent.md",value:`---
# Fill in the fields below to create a basic custom agent for your repository.
# The Copilot CLI can be used for local testing: https://gh.io/customagents/cli
# To make this agent available, merge this file into the default repository branch.
# For format details, see: https://gh.io/customagents/config

name:
description:
---

# My Agent

Describe what your agent does here...`});t=L.owner,n=L.nameOnly,r=P,i=e.toString(),O[29]=P,O[30]=L.nameOnly,O[31]=L.owner,O[32]=t,O[33]=n,O[34]=r,O[35]=i}else t=O[32],n=O[33],r=O[34],i=O[35];I=`/${t}/${n}/new/${r}?${i}`;t:{if(Y(B)){l=!0;break t}if("topLevel"===B.typeName&&u&&"slug"in u){l=(0,g.sS)(u.slug);break t}l=!1}let h=l,m=d||"None",f=d?`${"topLevel"===Z?"Agent":"Custom agent"}: ${d}`:"Select an agent";N=s.W,w=s.W.Anchor,R=M?function({isLoading:e,isCopilotSelected:t,selectedAgentObj:n,agentType:r,ariaLabel:s,disabled:i,variant:l,className:u}){return e?(0,a.jsx)(o.Q,{"aria-label":"Loading agents",disabled:!0,variant:l,className:(0,S.$)("AgentSelector-module__avatarButtonSkeleton--jkY1N",u),children:(0,a.jsx)(v.f,{width:"32px",height:"32px","data-testid":"agent-selector-skeleton"})}):t?(0,a.jsx)(y.L,{icon:c.CopilotIcon,selectedIcon:c.CopilotIcon,"aria-label":s,selected:!1,disabled:i,variant:l,className:u}):n&&"object"==typeof n&&"customSubAgent"===r?(0,a.jsx)(y.L,{icon:c.CopilotIcon,selectedIcon:c.FileCheckIcon,"aria-label":s,selected:!!n,disabled:i,variant:l,className:u}):n&&"object"==typeof n&&"avatar_url"in n?(0,a.jsx)(o.Q,{"aria-label":s,disabled:i||e,variant:l,className:(0,S.$)("AgentSelector-module__avatarButton--vp2Ab",u),children:(0,a.jsx)(p.r,{src:n.avatar_url,size:18,square:!0})}):(0,a.jsx)(y.L,{icon:c.CopilotIcon,selectedIcon:c.FileCheckIcon,"aria-label":s,selected:!!n,disabled:i,variant:l,className:u})}({isLoading:Q,isCopilotSelected:h,selectedAgentObj:u,agentType:Z,ariaLabel:f,disabled:W,variant:D?.variant,className:D?.className}):(0,a.jsx)(o.Q,{leadingVisual:d?c.FileCheckIcon:c.CopilotIcon,trailingAction:c.TriangleDownIcon,"aria-label":f,className:"AgentSelector-module__anchor--SnbmM","data-selected":!!u,disabled:W||Q,...D,children:m}),O[15]=Z,O[16]=J,O[17]=P,O[18]=D,O[19]=W,O[20]=X,O[21]=M,O[22]=Q,O[23]=L,O[24]=B,O[25]=w,O[26]=N,O[27]=I,O[28]=R}else w=O[25],N=O[26],I=O[27],R=O[28];return O[36]!==w||O[37]!==R?(T=(0,a.jsx)(w,{children:R}),O[36]=w,O[37]=R,O[38]=T):T=O[38],O[39]!==J.length||O[40]!==U||O[41]!==I||O[42]!==$||O[43]!==B||O[44]!==K?(j=(0,a.jsx)(s.W.Overlay,{width:"auto",children:0===J.length?(0,a.jsx)(A,{newFileUrl:I}):(0,a.jsxs)(i.l,{children:[(0,a.jsx)(f,{topLevelAgents:K,customAgents:U,selectedAgent:B,onSelectAgent:$}),(0,a.jsx)(i.l.Divider,{}),(0,a.jsx)(i.l.Group,{selectionVariant:!1,children:(0,a.jsxs)(i.l.LinkItem,{href:I,target:"_blank",children:[(0,a.jsx)(i.l.LeadingVisual,{children:(0,a.jsx)(c.PlusIcon,{})}),"Create a custom agent"]})})]})}),O[39]=J.length,O[40]=U,O[41]=I,O[42]=$,O[43]=B,O[44]=K,O[45]=j):j=O[45],O[46]!==N||O[47]!==T||O[48]!==j?(k=(0,a.jsxs)(N,{children:[T,j]}),O[46]=N,O[47]=T,O[48]=j,O[49]=k):k=O[49],k}function E(e){return!e?.typeName}let A=e=>{let t,n,s,o=(0,r.c)(4),{newFileUrl:i}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("h3",{className:"AgentSelector-module__emptyStateTitle--coj6M",children:"This repository has no custom agents"}),n=(0,a.jsx)("p",{className:"AgentSelector-module__emptyStateDescription--C58Xx",children:"Custom agents are reusable instructions and tools in your repository."}),o[0]=t,o[1]=n):(t=o[0],n=o[1]),o[2]!==i?(s=(0,a.jsxs)("div",{className:"AgentSelector-module__emptyStateContainer--FrxRO",children:[t,n,(0,a.jsx)(l.z,{href:i,children:"Create a custom agent"})]}),o[2]=i,o[3]=s):s=o[3],s};try{_.displayName||(_.displayName="AgentSelector")}catch{}try{A.displayName||(A.displayName="EmptyState")}catch{}},15838:(e,t,n)=>{n.d(t,{Cd:()=>l,E5:()=>i,Im:()=>c,nW:()=>o});var a=n(82518),r=n(94416);let s="stats:soft-nav-duration",o={turbo:"TURBO",react:"REACT","turbo.frame":"FRAME","turbo.error":"TURBO.ERROR",ui:"UI",hard:"HARD"};function i(){window.performance.clearResourceTimings(),window.performance.mark(s)}function l(e){(0,a.iv)({turboFailureReason:e,turboStartUrl:(0,r.dR)(),turboEndUrl:window.location.href})}function c(){let e=function(){if(0===performance.getEntriesByName(s).length)return null;performance.measure(s,s);let e=performance.getEntriesByName(s).pop();return e?e.duration:null}();if(!e)return;let t=o[(0,r.di)()],n=Math.round(e);t===o.react&&document.dispatchEvent(new CustomEvent("staffbar-update",{detail:{duration:n}})),(0,a.iv)({requestUrl:window.location.href,softNavigationTiming:{mechanism:t,destination:(0,r.fX)()||"rails",duration:n,initiator:(0,r.Pv)()||"rails"}})}},23568:(e,t,n)=>{n.d(t,{P:()=>m});var a=n(74848),r=n(96540),s=n(38621),o=n(9141),i=n(26108),l=n(21373),c=n(69497),u=n(70170),d=n(86391);let h="ReposSelector-module__invisibleWithBorder--IwcUx";function m({currentSelection:e,repositoryLoader:t,onSelect:n,selectionVariant:m,selectAllOption:p,additionalButtonProps:g,buttonText:f="",width:v,truncateMaxWidth:y,height:S,fullscreenOnNarrow:b,defaultOwner:_,onLoad:E,loadingElement:A,liveSelection:C=!1,onOpen:x,responsiveStyle:w="full"}){let[N,I]=(0,r.useState)(""),[R,T]=(0,r.useState)([]),[j,k]=(0,r.useState)(!0),[O,L]=(0,r.useState)(!1),P=(0,r.useCallback)((0,u.s)(async e=>{try{let n=await t(e,_);T(n),E?.(n)}catch{}k(!1),L(!0)},200),[t,_]);(0,r.useEffect)(()=>{k(!0),P(N)},[N,P,k]);let B=(0,r.useCallback)(e=>{"single"===m?!e[0]||e[0]._all?n(void 0):n(e[0]):n(e)},[m,n]),$=(0,r.useMemo)(()=>"multiple"===m?e||[]:e?[e]:[],[m,e]),G=(0,r.useCallback)(e=>{let t,n="medium"===v?35:"large"===v?60:24;return(e.name.length>n&&(t=`${e.name.substring(0,n)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,a.jsx)(s.RepoLockedIcon,{size:16}):(0,a.jsx)(s.RepoIcon,{size:16})}},[v]),F=(0,r.useCallback)(e=>e.name,[]),D=(0,r.useMemo)(()=>{let e=[];return e.push(...R),p&&e.push({name:"$all$",_all:!0}),e},[R,p]),M=f,W=s.RepoIcon;M||("multiple"===m?M=$.length>0?`${$.length} repositor${$.length>1?"ies":"y"}`:"Select repositories":$.length>0&&$[0]?(M=$[0].name,W=$[0].private?s.RepoLockedIcon:s.RepoIcon):M=p?"All repositories":"Select a repository");let q=(0,o.tv)("icon-on-mobile"===w?{narrow:!0}:{narrow:!1},!1);return A&&j&&!e&&!O?A:(0,a.jsx)(d.O,{renderAnchor:({"aria-labelledby":e,...t})=>{let{"aria-label":n,...r}=t;return q?(0,a.jsx)(i.K,{variant:"invisible",...e?{"aria-labelledby":e}:{"aria-label":n??M},icon:g?.leadingVisual||W,...r,className:`${h}${$.length?" ReposSelector-module__selected--dfRBF":""}`}):(0,a.jsx)(l.Q,{variant:"icon-on-mobile"===w?"invisible":void 0,leadingVisual:W,trailingAction:s.TriangleDownIcon,"aria-labelledby":e,...t,...g,className:`${g?.className}${"icon-on-mobile"===w?` ${h}`:""}`,children:(0,a.jsx)(c.A,{title:M,maxWidth:y??195,children:M})})},placeholderText:"Search",items:D,loading:j,groups:p?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:m,initialSelectedItems:$,onSelectionChange:B,onLiveSelectionChange:"multiple"===m&&C?B:void 0,filterItems:I,getItemKey:F,convertToItemProps:G,title:"Select a repository",width:v,height:S,responsiveOnNarrow:b,onOpen:x})}try{m.displayName||(m.displayName="ReposSelector")}catch{}},25811:(e,t,n)=>{n.d(t,{s:()=>o});var a=n(16522),r=n(96540),s=n(64846);function o(){let e,t,n,o=(0,a.c)(7),{value:i,setValue:l}=(0,s.Q)("AGENT_SESSIONS_LAST_SELECTED_AGENT");o[0]!==i?(e=()=>i??{},o[0]=i,o[1]=e):e=o[1];let[c,u]=(0,r.useState)(e);o[2]!==l?(t=e=>{u(e),l(e)},o[2]=l,o[3]=t):t=o[3];let d=t;return o[4]!==c||o[5]!==d?(n=[c,d],o[4]=c,o[5]=d,o[6]=n):n=o[6],n}},34295:(e,t,n)=>{n.d(t,{fM:()=>c});var a=n(88243),r=n(16213),s=n(65620),o=n(65411),i=n(96379);let l=null;function c(){return l||(l=new AgentSessionsTokenProvider),l}var u=new WeakSet;let AgentSessionsTokenProvider=class AgentSessionsTokenProvider extends o.JR{async validateAuthToken(e){if(e.ssoChanged(this.ssoOrgIDs))return this.fetchAuthToken();if(!e.isExpired)return e;if(e.refreshToken)try{return await (0,a._)(this,u,d).call(this,e.refreshToken)}catch{}return this.fetchAuthToken()}constructor(){super([],"/copilot/agent-sessions/token","AGENT_SESSIONS_TOKEN"),(0,r._)(this,u)}};async function d(e){let t=await (0,i.lS)(this.tokenEndpoint,{method:"POST",body:JSON.stringify({refresh_token:e})});if(!t.ok)throw Error(`Failed to refresh token: ${t.status}`);let n=await t.json(),a=s.Y.fromResult(n,this.ssoOrgIDs);return this.ssoOrgIDs=a.ssoOrgIDs,this.setLocalStorageAuthToken(a),a}},42255:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(70263),r=n(96540);let s=function(e){let t=(0,a.A)(),[n,s]=(0,r.useState)(e);return[n,(0,r.useCallback)(e=>{t()&&s(e)},[t])]}},42455:(e,t,n)=>{n.d(t,{b:()=>u});var a=n(97286),r=n(51120),s=n(97189),o=n(34295),i=n(96540),l=n(65411),c=n(69599);function u(...e){let t=(0,a.I)(...e),{numberOf401s:n,increment401s:d,reset401s:h}=(0,s.eS)(),{isError:m,isLoading:p,error:g}=t,f=(0,i.useRef)(null);return(0,i.useEffect)(()=>{m&&g instanceof r.Y&&401===g.status?f.current!==g&&(n>=5?(((0,c.G7)("mission_control_use_capi_token_provider")?new l.JR([]):(0,o.fM)()).removeLocalStorageAuthToken(),f.current=g,h()):(f.current=g,d())):m||p||!(n>0)?m||(f.current=null):(f.current=null,h())},[m,p,g,d,h,n]),t}},43258:(e,t,n)=>{n.d(t,{Qn:()=>l,T8:()=>u,Y6:()=>h,k6:()=>d});var a=n(74848),r=n(52870),s=n(96540),o=n(73189),i=n(42255);let l=5e3,c=(0,s.createContext)({addToast:o.l,addPersistedToast:o.l,clearPersistedToast:o.l}),u=(0,s.createContext)({toasts:[],persistedToast:null});function d({children:e}){let[t,n]=(0,i.A)([]),[o,d]=(0,s.useState)(null),{safeSetTimeout:h}=(0,r.A)(),m=(0,s.useCallback)(function(e){n([...t,e]),h(()=>n(t.slice(1)),l)},[t,h,n]),p=(0,s.useCallback)(function(e){d(e)},[d]),g=(0,s.useCallback)(function(){d(null)},[d]),f=(0,s.useMemo)(()=>({addToast:m,addPersistedToast:p,clearPersistedToast:g}),[p,m,g]),v=(0,s.useMemo)(()=>({toasts:t,persistedToast:o}),[t,o]);return(0,a.jsx)(c,{value:f,children:(0,a.jsx)(u,{value:v,children:e})})}function h(){return(0,s.use)(c)}try{c.displayName||(c.displayName="ToastContext")}catch{}try{u.displayName||(u.displayName="InternalToastsContext")}catch{}try{d.displayName||(d.displayName="ToastContextProvider")}catch{}},51120:(e,t,n)=>{n.d(t,{I:()=>c,Y:()=>FetchCAPIError});var a=n(50467),r=n(34295),s=n(25641),o=n(21067),i=n(69599),l=n(65411);let FetchCAPIError=class FetchCAPIError extends Error{constructor(e,t){super(e),(0,a._)(this,"status",void 0),this.name="FetchCAPIError",this.status=t}};async function c({path:e,method:t="GET",streamingResponse:n=!1,body:a,retryOn401:s}){let c=(0,i.G7)("mission_control_use_capi_token_provider")?new l.JR([]):(0,r.fM)();return u({path:e,method:t,streamingResponse:n,body:a,basePath:(0,o._$)().copilotApiOverrideUrl??"https://api.githubcopilot.com",retryOn401:s??(0,i.G7)("mission_control_retry_on_401")},c)}async function u(e,t,n=0){let a=await t.getAuthToken();if(!a)throw Error("No token available");let r=await (0,s.p)({authToken:a,basePath:e.basePath,method:e.method,path:e.path,streamingResponse:e.streamingResponse,body:e.body});if(!r.ok){if(e.retryOn401&&401===r.status&&n<1){let r=(0,i.G7)("mission_control_safe_token_clearing"),s=t.getLocalStorageAuthToken();return r&&s?.value!==a.value||t.removeLocalStorageAuthToken(),u(e,t,n+1)}let s="error"in r?r.error:`Failed CAPI request (${r.status})`;if("response"in r&&r.response)try{let e=await r.response.text();e&&e.trim()&&(s=e.trim())}catch{}throw new FetchCAPIError(s,r.status)}return r}},63422:(e,t,n)=>{n.d(t,{L:()=>i});var a=n(74848),r=n(16522),s=n(26108),o=n(34164);let i=e=>{let t,n,i,l,c,u,d,h=(0,r.c)(14);if(h[0]!==e){let{ref:a,...r}=e;i=a;let{selected:d,icon:m,selectedIcon:p,...g}=r;t=(l=d)&&p?p:m,n=s.K,c=g,u=(0,o.$)("IconButtonSelector-module__anchor--t8Bzw",g.className),h[0]=e,h[1]=t,h[2]=n,h[3]=i,h[4]=l,h[5]=c,h[6]=u}else t=h[1],n=h[2],i=h[3],l=h[4],c=h[5],u=h[6];return h[7]!==t||h[8]!==n||h[9]!==i||h[10]!==l||h[11]!==c||h[12]!==u?(d=(0,a.jsx)(n,{...c,className:u,icon:t,"data-selected":l,ref:i}),h[7]=t,h[8]=n,h[9]=i,h[10]=l,h[11]=c,h[12]=u,h[13]=d):d=h[13],d};i.displayName="IconButtonSelector"},64846:(e,t,n)=>{n.d(t,{Q:()=>s});var a=n(82075),r=n(96540);function s(e){let t=(0,a.D)("localStorage");return{value:(0,r.useMemo)(()=>t.getItem(e)??void 0,[t,e]),setValue:n=>{t.setItem(e,n)},removeItem:()=>{t.removeItem(e)}}}},65432:(e,t,n)=>{n.d(t,{Bu:()=>p,SC:()=>c,Ti:()=>h,iS:()=>u,k5:()=>l,o4:()=>d,rZ:()=>m});var a=n(82591),r=n(73900),s=n(15838),o=n(94416);let i=0;function l(){i=0,document.dispatchEvent(new Event(a.z.INITIAL)),(0,o.xT)()}function c(e){(0,o.LM)()||(document.dispatchEvent(new Event(a.z.PROGRESS_BAR.START)),document.dispatchEvent(new r.sW(e)),(0,o.Vy)(e),(0,o.ZW)(),(0,o.HK)(),(0,s.E5)())}function u(e={}){f(e)&&(i+=1,document.dispatchEvent(new r.ni((0,o.di)(),i)),h(e))}function d(e={}){if(!f(e))return;i=0;let t=(0,o.my)()||o.BW;document.dispatchEvent(new r.Kq((0,o.di)(),t)),g(),(0,s.Cd)(t),(0,o.xT)()}function h(e={}){if(!f(e))return;let t=(0,o.di)();g(),document.dispatchEvent(new r.RQ(t)),(0,o.Ff)(),(0,o.JA)(t)}function m(e={}){f(e)&&((0,s.Im)(),document.dispatchEvent(new Event(a.z.RENDER)))}function p(){document.dispatchEvent(new Event(a.z.FRAME_UPDATE))}function g(){document.dispatchEvent(new Event(a.z.PROGRESS_BAR.END))}function f({skipIfGoingToReactApp:e,allowedMechanisms:t=[]}={}){return(0,o.LM)()&&(0===t.length||t.includes((0,o.di)()))&&(!e||!(0,o.gc)())}},73900:(e,t,n)=>{n.d(t,{Kq:()=>SoftNavErrorEvent,RQ:()=>SoftNavEndEvent,gh:()=>SoftNavPayloadEvent,ni:()=>SoftNavSuccessEvent,sW:()=>SoftNavStartEvent});var a=n(50467),r=n(82591);let s=class SoftNavEvent extends Event{constructor(e,t){super(t),(0,a._)(this,"mechanism",void 0),this.mechanism=e}};let SoftNavStartEvent=class SoftNavStartEvent extends s{constructor(e){super(e,r.z.START)}};let SoftNavSuccessEvent=class SoftNavSuccessEvent extends s{constructor(e,t){super(e,r.z.SUCCESS),(0,a._)(this,"visitCount",void 0),this.visitCount=t}};let SoftNavErrorEvent=class SoftNavErrorEvent extends s{constructor(e,t){super(e,r.z.ERROR),(0,a._)(this,"error",void 0),this.error=t}};let SoftNavEndEvent=class SoftNavEndEvent extends s{constructor(e){super(e,r.z.END)}};let SoftNavPayloadEvent=class SoftNavPayloadEvent extends Event{constructor(e){super("soft-nav:payload"),(0,a._)(this,"payload",void 0),(0,a._)(this,"appPayload",void 0),this.payload=e.payload,this.appPayload=e.appPayload}}},78223:(e,t,n)=>{function a(e){return"copilot-swe-agent"===e}function r(e,t){return!e.topLevelAgentId||a(t)||!!e.subAgentSlug}n.d(t,{CF:()=>r,sS:()=>a})},82591:(e,t,n)=>{n.d(t,{z:()=>a});let a=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",REPLACE_MECHANISM:"soft-nav:replace-mechanism",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",REACT_DONE:"soft-nav:react-done",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}})},92352:(e,t,n)=>{n.d(t,{s:()=>S,P:()=>_});var a=n(74848),r=n(16522),s=n(14496),o=n(97189),i=n(69599),l=n(66990),c=n(23568),u=n(96379),d=n(38621),h=n(82156),m=n(26108),p=n(96540),g=n(35247),f=n(79064),v=n(63422);let y="RepoBranchAgentSelector-module__invisibleSelectorButton--vpcnl",S=e=>{let t,n,u,S,A,C,x,w=(0,r.c)(30),{hideRepoSelector:N,initialRepoNWO:I,initialBranch:R,selectedRepo:T,selectedBranch:j,selectedAgent:k,onRepoSelect:O,onBranchSelect:L,onAgentSelect:P,agentSelectionEnabled:B}=e,$=void 0===B||B,G=(0,p.useRef)(!1);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.G7)("swe_agent_member_requests_agent_panel"),w[0]=t):t=w[0];let F=t;w[1]!==R||w[2]!==I||w[3]!==L||w[4]!==O||w[5]!==T?(n=e=>{let t;if(!T&&!G.current){if(I&&(t=e.find(e=>e.nameWithOwner===I))&&(t.enabled||F&&b(t))){O(t),L(R||t.defaultBranch),G.current=!0;return}let n=f.Jt.getLastUsedRepository();if(n){let t=e.find(e=>e.nameWithOwner===`${n.ownerLogin}/${n.name}`);if(t&&(t.enabled||F&&b(t))){O(t),L(t?.defaultBranch),G.current=!0;return}}let a=e.find(E);a?(O(a),L(a.defaultBranch),G.current=!0):t&&(O(t),L(R||t.defaultBranch),G.current=!0)}},w[1]=R,w[2]=I,w[3]=L,w[4]=O,w[5]=T,w[6]=n):n=w[6];let D=n;w[7]!==I?(u=(e,t)=>_(e,t,I),w[7]=I,w[8]=u):u=w[8];let M=u;return w[9]!==N||w[10]!==L||w[11]!==D||w[12]!==O||w[13]!==M||w[14]!==T?(S=!N&&(0,a.jsx)(c.P,{repositoryLoader:M,selectionVariant:"single",responsiveStyle:g.W.askModeDropdown?"icon-on-mobile":"full",selectAllOption:!1,onSelect:e=>{e&&(O(e),L(e.defaultBranch))},currentSelection:T,width:"medium",additionalButtonProps:{"aria-label":`Repository: ${T?.nameWithOwner||"Select repository"}`,className:"RepoBranchAgentSelector-module__repoSelectorButton--tAnOR",variant:"invisible"},onLoad:D,loadingElement:(0,a.jsx)(h.f,{width:"150px",height:"32px"})}),w[9]=N,w[10]=L,w[11]=D,w[12]=O,w[13]=M,w[14]=T,w[15]=S):S=w[15],w[16]!==L||w[17]!==j||w[18]!==T?(A=(0,a.jsx)(a.Fragment,{children:T?(0,a.jsx)(l.PI,{cacheKey:"repo-branch-agent-selector",canCreate:!1,currentCommitish:j??T.defaultBranch,defaultBranch:T.defaultBranch,owner:T.owner,repo:T.nameOnly,types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,actionListHeadingText:"Select a branch",onSelectItem:L,renderAnchor:e=>(0,a.jsx)(v.L,{...e,icon:d.GitBranchIcon,selectedIcon:d.GitBranchCheckIcon,selected:j!==T.defaultBranch,"aria-label":`Branch: ${j||"Select branch"}`,"aria-labelledby":void 0,variant:"invisible",className:y})}):(0,a.jsx)(m.K,{icon:d.GitBranchIcon,"aria-label":"Loading branches\u2026",disabled:!0})}),w[16]=L,w[17]=j,w[18]=T,w[19]=A):A=w[19],w[20]!==$||w[21]!==P||w[22]!==k||w[23]!==j||w[24]!==T?(C=$&&(T?(0,a.jsx)(s.b,{repo:T,branch:j||T.defaultBranch,selectedAgent:k,onSelectAgent:e=>P(e),iconOnly:!0,buttonProps:{variant:"invisible",className:y}}):(0,a.jsx)(h.f,{width:"32px",height:"32px"})),w[20]=$,w[21]=P,w[22]=k,w[23]=j,w[24]=T,w[25]=C):C=w[25],w[26]!==S||w[27]!==A||w[28]!==C?(x=(0,a.jsx)(o.Fn,{children:(0,a.jsxs)("div",{className:"RepoBranchAgentSelector-module__container--gHrlH",children:[S,A,C]})}),w[26]=S,w[27]=A,w[28]=C,w[29]=x):x=w[29],x};function b(e){return!!(e.userCanRequestCca||e.userCanGrantOrgCca||e.userCanGrantEnterpriseCca||e.userHasRequestedCca)}async function _(e="",t,n){let a=new URL("/copilot/agent-sessions/repositories",window.location.origin);e.trim()&&a.searchParams.set("q",e.trim()),t&&a.searchParams.set("defaultOwner",t),n&&a.searchParams.set("includeInTopRepos",n);let r=await (0,u.lS)(a.href);if(r.ok){let{repositories:e}=await r.json();return e.map(e=>({id:e.id,graphQLId:e.graphQLId,nameWithOwner:e.nameWithOwner,enabled:e.enabled,name:e.nameWithOwner,nameOnly:e.name,owner:e.owner,defaultBranch:e.defaultBranch,private:"public"!==e.visibility,isEmpty:e.isEmpty,userHasRequestedCca:e.userHasRequestedCca,userCanRequestCca:e.userCanRequestCca,userCanGrantOrgCca:e.userCanGrantOrgCca,userCanGrantEnterpriseCca:e.userCanGrantEnterpriseCca,businessSlug:e.businessSlug}))}return[]}try{S.displayName||(S.displayName="RepoBranchAgentPicker")}catch{}function E(e){return e.enabled}},95869:(e,t,n)=>{n.d(t,{n:()=>s});var a=n(96379),r=n(97286);function s(e){return(0,r.I)({enabled:!!e,queryKey:["top-level-agents",e],queryFn:async()=>{try{if(!e)return[];let t=await (0,a.lS)(`/copilot/agent-sessions/${e}/agents`);if(!t.ok)return[];return(await t.json()).agents||[]}catch{return[]}}})}},97189:(e,t,n)=>{n.d(t,{Fn:()=>l,eS:()=>i});var a=n(74848),r=n(16522),s=n(96540);let o=(0,s.createContext)(void 0);function i(){let e=(0,s.use)(o);if(!e)throw Error("useConsecutiveCAPI401sContext must be used within a ConsecutiveCAPI401sProvider");return e}function l(e){let t,n,i,l,u=(0,r.c)(7),{children:d}=e,[h,m]=(0,s.useState)(0);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>m(c),n=()=>m(0),u[0]=t,u[1]=n):(t=u[0],n=u[1]),u[2]!==h?(i={numberOf401s:h,increment401s:t,reset401s:n},u[2]=h,u[3]=i):i=u[3];let p=i;return u[4]!==d||u[5]!==p?(l=(0,a.jsx)(o,{value:p,children:d}),u[4]=d,u[5]=p,u[6]=l):l=u[6],l}function c(e){return e+1}try{o.displayName||(o.displayName="ConsecutiveCAPI401sContext")}catch{}try{l.displayName||(l.displayName="ConsecutiveCAPI401sProvider")}catch{}}}]);
//# sourceMappingURL=49498-815b90632a55.js.map