"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[30721],{30721:(e,t,r)=>{r.d(t,{mf:()=>k.RelayEnvironmentProvider,VB:()=>SSRNetwork,SD:()=>j,E7:()=>P});var i=r(50467),s=r(40961),a=r(69487),n=r(37285),o=r(96379),c=r(71315),l=r(38102),u=r(69599);let d=["NOT_FOUND","SAML","SERVICE_UNAVAILABLE","FORBIDDEN","AUTHENTICATION"];var h=r(51987),p=r(86185);let f=class ValidationError extends Error{constructor(e,t,r){super(e,t),(0,i._)(this,"catalogService",void 0),this.catalogService=r,this.name="ValidationError"}},_=class RateLimitError extends Error{constructor(...e){super(...e),this.name="RateLimitError"}},g=class NotAcceptableError extends Error{constructor(...e){super(...e),this.name="NotAcceptableError"}},y=class SecFetchDestError extends Error{constructor(...e){super(...e),this.name="SecFetchDestError"}},m=class FetchNetworkError extends Error{constructor(...e){super(...e),this.name="FetchNetworkError"}};async function w(e,t,r){if(e.status>401&&404!==e.status){let i=await e.text(),s={url:e.url,timestamp:new Date().toISOString(),persistedQueryId:t,persistedQueryName:r,failureRequestId:e.headers.get("X-Github-Request-Id")},a=`HTTP error (${e.status}): ${i||"No additional text"}.
    Error Info: ${JSON.stringify(s)}`;if(429===e.status)throw new _(a,{cause:e.status});if(406===e.status)throw new g(a,{cause:e.status});if(422===e.status&&i.includes("sec-fetch-dest"))throw new y(a,{cause:e.status});throw Error(a,{cause:e.status})}}async function E(e,t,r,i="GET",s,a,n,o,c){return(await b(e,t,r,i,{isSubscription:!1,scope:void 0,preheatSource:c},s,a,n,o)).response}async function b(e,t,r,i="POST",s={},o,u,h,p){let _=JSON.stringify((0,a.stableCopy)({persistedQueryName:t,query:e,variables:r,...s.scopeObject?{scopeObject:s.scopeObject}:{}})),{isSubscription:g,scope:y,subscriptionTopic:m,dispatchTime:w}=s,E=o;void 0===o||""!==o&&o.endsWith("/_graphql")||((0,l.N7)(Error(`fetchGraphQL received invalid baseUrl - must end with /_graphql persistedQueryId: ${e}, persistedQueryName: ${t}, invalidBaseUrl: ${o}`)),E=void 0);let v=function(e,t,r,i,s,a,n="/_graphql"){let o=[];if("GET"===e&&o.push(`body=${t}`),r&&o.push("subscription=1"),s&&o.push(`scope=${encodeURIComponent(s)}`),i&&o.push(`subscriptionTopic=${encodeURIComponent(i)}`),a&&o.push(`dispatchTime=${encodeURIComponent(a)}`),c.cg){let e=new URL(c.cg.location.href,c.cg.location.origin).searchParams.get("_features");e&&o.push(`_features=${e}`)}return o.length>0?`${n}?${o.join("&")}`:n}(i,encodeURIComponent(_),g,m,y,w,E),O=null;try{let{subscriptionId:r,requestId:a,json:o}=await S(v,i,e,t,_,u,s.preheatSource);if(O=r,!function(e,t,r){let i=("errors"in e?e.errors:[]).filter(e=>!d.includes(e.type));if("errors"in e&&i.length){let t=i.map(e=>`GraphQL error: ${e.type}: ${e.message} (path: ${e.path})`).join(", "),s=new f(`${t} (Persisted query id: ${r})`,{cause:i},e.extensions?.query_owning_catalog_service);(0,l.N7)(s)}if(!("data"in e)){let i=function e(t){if(null==t)return t;if(Array.isArray(t))return t.map(t=>null==t?t:"object"==typeof t?e(t):"[FILTERED]");if("object"==typeof t){let r={};for(let i in t)if(Object.prototype.hasOwnProperty.call(t,i)){let s=t[i];"errors"===i||null==s?r[i]=s:"object"==typeof s?r[i]=e(s):r[i]="[FILTERED]"}return r}return t}(e),s=Error(`Expected data property in response: ${JSON.stringify(i)}. persistedQueryId: ${r}, requestId: ${t}`);(0,l.N7)(s)}}(o,a,e),o)if(p){let e={__trace:{...o?.__trace,cache_result:"refresh"}};(0,n.Av)(e)}else(0,n.Av)(o);return{subscriptionId:O,response:o}}catch(e){if(h){let t;return"RateLimitError"!==(t=e?.name)&&"SecFetchDestError"!==t&&"NotAcceptableError"!==t&&"FetchNetworkError"!==t&&(0,l.N7)(e),h.error(e),{subscriptionId:O,response:{errors:[{message:"An error occurred while fetching data. Please try again later."}],extensions:{}}}}throw e}}async function S(e,t,r,i,s,a,o){return v((0,n.RD)(e),t,r,i,s,a,o)}async function v(e,t,r,i,s,a,n){let d,f,_={...(0,h.kt)(),...n?{"X-GITHUB-PREHEAT":n}:{}};a?.issues_react_perf_test&&(_["X-LUC-Environment"]="issues");let g=(d="GET"===t?await fetch(e,{method:t,cache:"no-cache",credentials:"include",headers:{Accept:"application/json",..._}}):await (0,o.DI)(e,{method:t,headers:{Accept:"application/json",..._},...s?{body:s}:void 0})).headers.get("X-Subscription-ID"),y=d.headers.get("X-Github-Request-Id")||"",E=d.status;if(p.z.checkResponse(d),await w(d,r,i),404===E&&"POST"===t)throw c.cg?.location.reload(),Error("Reloading page due to 404 on GraphQL mutation for unauthenticated user.");try{f=await d.json()}catch(i){let t=(0,u.G7)("fetch_graphql_ignore_fetch_network_errors"),r={error:i instanceof Error?`${i.name}: ${i.message}`:String(i),status:E,url:e,requestId:y};if(t&&i instanceof Error&&"TypeError"===i.name&&"Failed to fetch"===i.message)throw new m(`Network error while reading response. Please check your connection and try again. ${JSON.stringify(r)}`);throw(0,l.N7)(Error(`Failed to parse server JSON response ${JSON.stringify(r)}`)),Error(`Failed to parse server response. Please try again later. ${JSON.stringify(r)}`)}return{subscriptionId:g,requestId:y,json:f,status:E}}let O=[{kind:"linked",handle(e,t,r){if(null!=t&&t.getType()===a.ROOT_TYPE&&"node"===e.name&&r.hasOwnProperty("id"))return r.id}},{kind:"pluralLinked",handle(e,t,r){if(null!=t&&t.getType()===a.ROOT_TYPE&&"nodes"===e.name&&r.hasOwnProperty("ids"))return r.ids}}];var A=r(11418),N=r(73056),R=r(69982);function T(e){return(0,R.unstable_scheduleCallback)(R.unstable_LowPriority,e)}var C=r(87683),D=r(53419),k=r(18312);async function I({params:e,variables:t,baseUrl:r,enabledFeatures:i,observer:s,isClientSideCachingEnabled:a,cache:n,metadata:o,preloadSubscriptions:c}){if(!e.id)throw Error("Params has no id property!");let l=o?.ttl,u=o?.defaultValues,d=o?.preheatSource,h=o?.[C.Zm.EXCLUDE_FROM_CACHE_KEY],p=o?.skipCache,f=void 0!==l&&l>0,_="mutation"===e.operationKind?"POST":"GET",g=a=>E(e.id,e.name,t,_,r,i,s,a,p?"force_refresh":d);return n&&a&&f&&"mutation"!==e.operationKind?n.persisterFn(g,e.id,e.name,t,s,l,{query_name:e.name,preheat_source:d,[C.Zm.EXCLUDE_FROM_CACHE_KEY]:h,skip_cache:p},u,c):g()}let $={cancel:()=>!1,schedule:e=>((0,s.unstable_batchedUpdates)(e),"")};let SSRNetwork=class SSRNetwork{preloadSubscriptions(e){if(e&&"extensions"in e&&e.extensions&&e.extensions.subscriptions){let t=e.extensions.subscriptions;for(let e in t)for(let r in this.preloadedSubscriptions.has(e)||this.preloadedSubscriptions.set(e,new Map),t[e])this.preloadedSubscriptions.get(e)?.set(r,t[e][r])}}execute(e,t,r){return this.relayNetwork.execute(e,t,r)}getPreloadedSubscriptions(){return this.preloadedSubscriptions}constructor(e,t={},r,s,n,o,d,h){(0,i._)(this,"relayNetwork",void 0),(0,i._)(this,"ssrPreloadedData",void 0),(0,i._)(this,"preloadedSubscriptions",void 0),(0,i._)(this,"warningsShown",void 0),(0,i._)(this,"enabled_features",void 0),(0,i._)(this,"maxAge",void 0),(0,i._)(this,"cache",void 0),(0,i._)(this,"stalePreloadedData",void 0),(0,i._)(this,"markPreloadedDataAsStale",void 0),this.ssrPreloadedData=e,this.enabled_features=t,this.preloadedSubscriptions=r,this.warningsShown=new Set,this.maxAge=n,this.cache=o,this.stalePreloadedData=d??!1,this.markPreloadedDataAsStale=h,this.relayNetwork=a.Network.create((e,t,r)=>a.Observable.create(i=>{let a=function({params:e,variables:t,ssrPreloadedQueries:r,baseUrl:i,emitWarning:s,enabledFeatures:a,maxAge:n,observer:o,cache:l,metadata:d,stalePreloadedData:h,preloadSubscriptions:p}){if(!e.id)throw Error("params has no id property!");let f=(0,u.G7)("issues_react_client_side_caching");if(e.id&&r){let i=JSON.stringify(t),s=r.get(e.id)?.get(i),a=Math.floor(Date.now()/1e3),u=s?.timestamp;if(s&&(o.next(s),!(n&&u&&a>u+n)&&!h)){if(f&&l){let r=e.metadata?.ttl,i=e.metadata?.defaultValues;void 0!==r&&r>0&&l.tryCacheFetchResult(e.id,e.name,t,s,r,{query_name:e.name,update_type:"preloaded"},i)}o.complete();return}e.metadata?.isRelayRouteRequest&&(0,c.g5)()}if(c.KJ)return I({params:e,variables:t,baseUrl:i,enabledFeatures:a,observer:o,isClientSideCachingEnabled:f,cache:l,metadata:{...d??{},...e.metadata},preloadSubscriptions:p})}({params:e,variables:t,ssrPreloadedQueries:this.ssrPreloadedData,baseUrl:s,emitWarning:e=>{this.warningsShown.has(e)||(this.warningsShown.add(e),console.warn(e))},enabledFeatures:this.enabled_features,maxAge:n,observer:i,cache:this.cache,metadata:r.metadata,stalePreloadedData:this.stalePreloadedData,preloadSubscriptions:this.preloadSubscriptions.bind(this)});a instanceof Promise&&a.then(e=>{Array.isArray(e)||this.preloadSubscriptions(e),e&&i.next(e),i.complete()}),"mutation"===e.operationKind&&(this.stalePreloadedData=!0,this.markPreloadedDataAsStale?.(!0))}),(e,t)=>(function(e,t,r=new Map){let i=e.id,s=e.name;return a.Observable.create(a=>{let n=()=>{},o=!1;return async function(){if(!i)throw Error("unexpected operation with no id!");let c=e.metadata?.scope,u=function(e,t,r,i){let s=i.get(e);if(s)e:for(let[e,i]of s){for(let[i,s]of Object.entries(JSON.parse(e)))if("$scope"===i&&r!==s||t[i]!==s)continue e;return i}}(i,t,c,r),d=null;if(u)d=u.subscriptionId,u.response&&a.next(u.response);else try{let e=await b(i,s,t,"GET",{isSubscription:!0,scope:c});d=e.subscriptionId,e.response&&a.next(e.response)}catch(e){if(e instanceof Error&&e.message.includes("Subscription halted"))return;throw e}try{let e=await (0,A.H)();if(o)return;let r=(0,N.$)(e,d,async({scope_object:e,subscription_topic:r,dispatch_time:n})=>{try{let{response:o}=await b(i,s,{...t},"GET",{isSubscription:!0,scopeObject:e,subscriptionTopic:r,dispatchTime:n,scope:c});o&&a.next(o)}catch(e){(0,l.N7)(e,{message:`Error in fetching update for ${i} with variables ${JSON.stringify(t)}`})}});r?.unsubscribe&&(n=r.unsubscribe)}catch(e){a.error(e)}}(),{get closed(){return o},unsubscribe(){o=!0,n()}}})})(e,t,this.preloadedSubscriptions))}};let P=e=>{let t;if(c.KJ&&!(c.KJ&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&(0,u.G7)("issues_react_safari_cache_disable"))){let e=(0,u.G7)("issues_react_client_side_caching_analytics");t=(0,C.VC)({sendAnalyticsEvent:(e,t,r={})=>{let i={react:!0,version:C.L7};(0,D.BI)(e,{...i,...r,target:t})},reportableEvents:e?C.Zf.ANY:C.Zf.NONE})}let r=new SSRNetwork(new Map,{},new Map,e,void 0,t),i=new a.Environment({scheduler:$,store:new a.Store(new a.RecordSource,{gcReleaseBufferSize:50,queryCacheExpirationTime:3e5,gcScheduler:T}),getDataID:(e,t)=>{if("Viewer"===t)return null==e.id?(0,a.generateClientID)("client:root","viewer"):e.id;if("ProjectV2SingleSelectFieldOption"===t){let t=[];return e.id&&t.push(e.id),e.name&&t.push(e.name),e.color&&t.push(e.color),e.description&&t.push(function(e){let t=0;if(0===e.length)return t;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}(e.description)),t.join("_")}return e.id},network:r,missingFieldHandlers:O});return i.options={baseUrl:e,getPreloadedSubscriptions:()=>r.getPreloadedSubscriptions()},i};function j({environment:e,query:t,variables:r={},metadata:i}){let s=(0,a.getRequest)(t),n=(0,a.createOperationDescriptor)(s,r);return e.retain(n),(0,a.fetchQuery)(e,t,r,{fetchPolicy:"store-or-network",networkCacheConfig:{metadata:i}})}},75552:(e,t,r)=>{r.d(t,{XA:()=>l,Zm:()=>n,hz:()=>c});var i=r(69599),s=r(37285),a=r(82518);let n={EXCLUDE_FROM_CACHE_KEY:"exclude_from_cache_key"},o={};function c(e,t,r,i,s){let a={...i,...Object.fromEntries(Object.entries(r).filter(([,e])=>void 0!==e))},n=Object.keys(a).sort(),o={};for(let e of n){if(s&&s.includes(e))continue;let t=a[e];null!=t&&(o[e]=t)}return`${e}-${t}#${JSON.stringify(o)}`}function l({storage:e,prefix:t,maxAgeMs:r,sendAnalyticsEvent:l}){let p=(0,i.G7)("issues_react_extended_preheat_analytics");async function f(r,i,s,a,l){if(!e)return;let d=c(t,i,s,l,a?.[n.EXCLUDE_FROM_CACHE_KEY]);try{let t=await e.getItem(d,u(a));if(t&&t.queryHash!==r)return o;return t?.state.data}catch{return}}async function _(t){if(e)try{await e.removeItem(t)}catch{console.warn(`Failed to evict query for key: ${t}`)}}async function g(r,i,s,a,o,l,d,h){if(!e)return;let p=c(t,i,s,d,l?.[n.EXCLUDE_FROM_CACHE_KEY]);try{await e.setItem(p,{queryHash:r,queryKey:Object.entries(s).flat(),state:{data:a,dataUpdatedAt:Date.now(),ttl:o,preheatSource:h}},void 0,void 0,u(l))}catch{console.warn(`Failed to persist query for key: ${p}`)}}return{persisterFn:async function(i,u,y,m,w,E,b,S,v){var O,A,N,R,T,C,D;let k,I=await f(u,y,m,b,S),$=c(t,y,m,S,b?.[n.EXCLUDE_FROM_CACHE_KEY]),P=void 0!==I&&I!==o,j=b?.preheat_source,x=!!j,L=!!b?.skip_cache,q=null,F=null;if(P&&("object"==typeof I&&null!==I&&"data"in I&&(q=JSON.stringify(I.data)),(0,s.Av)({__trace:{query_name:b?.query_name,query_id:u,query_variables:m,duration_ms:1,cache_result:"hit"}}),x||L||(v?.(I),w.next(I),"undefined"==typeof window||(0,a.Xl)()&&window.dispatchEvent(new CustomEvent("relay-cache-hit")))),x&&P){p&&j&&l("offline_cache.preheat_noop",$,{preheatSource:j});return}try{k=await i(P)}catch(e){if(P)return h([{message:e instanceof Error?e.message:"Unknown error"}]),I;throw e}P&&d(k)&&h(k.errors);let G=(O=k,!!(A=I)&&(A===o||!!O&&d(O))),M=!(!(N=k)||"object"==typeof N&&"errors"in N&&Array.isArray(N.errors)&&N.errors.length>0);if(e&&G)_($);else if(M&&e){"object"==typeof k&&null!==k&&"data"in k&&(F=JSON.stringify(k.data));let e=(R=!!I,T=q,C=F,D=x,L?"force_refresh":R?T!==C?"changed":"unchanged":D?"pre_heated":"new");g(u,y,m,k,E??r,{...b,update_type:e},S,j)}if(!x)return k},retrieveQuery:f,tryCacheFetchResult:g}}function u(e){if(!e)return;let t={};for(let[r,i]of Object.entries(e))Object.values(n).includes(r)||(t[r]=i);return t}function d(e){return"object"==typeof e&&null!==e&&"errors"in e&&Array.isArray(e.errors)&&e.errors.length>0}function h(e){"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("stale-cache-warning",{detail:{errors:e}}))}},86185:(e,t,r)=>{r.d(t,{z:()=>p});var i=r(35750),s=r(18150),a=r(87057),n=r(69599),o=r(82075);let c="VERSION_MISMATCH_LAST_TRIGGERED",l=(0,o.A)("localStorage",{ttl:9e7,throwQuotaErrorsOnSet:!1}),u=null;let VersionMismatchRateLimiter=class VersionMismatchRateLimiter{canTrigger(){let e=this.getLastTriggerTime();return null===e||Date.now()-e>=864e5}recordTrigger(){let e=Date.now();l.setItem(c,e.toString()),u=e}getLastTriggerTime(){let e=l.getItem(c);if(e){let t=parseInt(e,10);return isNaN(t)?null:t}return u}clearTriggerRecord(){l.removeItem(c),u=null}};let d=new VersionMismatchRateLimiter;var h=new WeakMap;let p=new class VersionMismatchDetector{registerApp(e,t){(0,i._)(this,h).set(e,t)}unregisterApp(e){(0,i._)(this,h).delete(e)}checkResponse(e,t){if("true"!==e.headers.get("X-GitHub-Version-Mismatch")||!(0,n.G7)("react_version_mismatch_detection")||!d.canTrigger())return!1;let r={clientVersion:(0,a.O)(),serverVersion:e.headers.get("X-GitHub-Server-Version")||void 0,requestUrl:e.url,responseHeaders:e.headers,appName:t};if(d.recordTrigger(),t){let e=(0,i._)(this,h).get(t);if(e)return e.onMismatchDetected(r),!0}else{let e=!1;for(let[t,s]of(0,i._)(this,h).entries()){let i={...r,appName:t};s.onMismatchDetected(i),e=!0}return e}return!1}constructor(){(0,s._)(this,h,{writable:!0,value:new Map})}}},87683:(e,t,r)=>{r.d(t,{L7:()=>l,VC:()=>u,Zf:()=>i.Zf,Zm:()=>a.Zm,vp:()=>o});var i=r(96698),s=r(21067),a=r(75552);let n={Check:e=>"object"==typeof e&&null!==e&&(void 0===e.data||"object"==typeof e.data)&&(void 0===e.errors||!!Array.isArray(e.errors)),Code:()=>"manual-validator",Errors:()=>[]},o="relay-query",c=6048e5,l="1.0.6",u=({sendAnalyticsEvent:e,reportableEvents:t=i.Zf.ANY,maxAgeMs:r=c})=>{let l=(0,i.i5)({validator:n,sendAnalyticsEvent:(r,...s)=>{t!==i.Zf.NONE&&(t===i.Zf.ANY||Array.isArray(t)&&t.includes(r))&&e(r,...s)}});return(0,a.XA)({storage:l,prefix:`${o}-${(0,s.cj)()}`,maxAgeMs:r,sendAnalyticsEvent:e})}}}]);
//# sourceMappingURL=30721-d04d218cc2e9.js.map